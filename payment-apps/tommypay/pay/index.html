<!DOCTYPE html>
<html>
    <head>
        <title>Sign up for TommyPay</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="../files/style.css"/>
    </head>
    <body>
        <div class="content" style="background-image: url(../files/cashbox.jpg)">
            <h2 class="title">Pay with TommyPay</h2>
            <div class="separator"></div>

            <p>Do you wish to make this payment?</p>

            <a class="button" id="paymentbutton" href="#">Pay!</a>
        </div>

        <div class="footer">
            <p>&copy; 2017 TommyPay</p>
        </div>

        <script>
            var paymentButton = document.getElementById("paymentButton");

            navigator.serviceWorker.addEventListener('message', function(event) {
                console.log("Page got message from SW");
                paymentButton.onclick = function() {
                    console.log("Page passing response back to SW");
                    event.source.postMessage({
                        methodName: "https://tommypay.no/pay",
                        details: {
                            test: "test"
                        }
                    });
                    window.close();
                }
            });
        </script>
    </body>
</html>
